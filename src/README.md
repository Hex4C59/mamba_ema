# src 目录说明

此目录为项目的主代码入口，包含训练、评估、推理脚本及各类可复用模块（模型、数据接口、损失、指标、工具等）。README 仅说明目录定位、接口约定与使用建议，不涉及具体实现细节或文件内容。

目的
- 集中存放项目核心逻辑，便于开发、测试与部署。
- 将通用组件（模型、数据、loss、metrics、utils）模块化，降低各脚本间耦合。
- 提供统一的运行入口（train.py）并保持与配置系统的良好对接。

设计理念
- 单一入口：train.py 包含训练、验证、测试的完整流程
- 不需要单独的 eval.py、infer.py、test.py 文件
- 通过命令行参数（--mode）切换不同执行模式

建议目录组织（示例）
- train.py                         # 训练、验证、测试统一入口
- models/                          # 模型定义与注册
- data/                            # 数据集、transforms、loader 工厂
- losses/                          # 损失函数实现与组合器
- metrics/                         # 评估指标实现与聚合器
- utils/                           # 日志、设备管理、通用工具
- trainers/                        # 训练循环逻辑（可选，当 train.py 超过 300 行时拆分）
- evaluators/                      # 评估逻辑（可选，当 train.py 超过 300 行时拆分）
- README.md                        # 本文件

接口约定（建议）
- train.py 应通过参数或配置文件接收运行所需信息（配置路径、设备、随机种子、输出目录等）。
- 模块化组件应提供清晰的构造/工厂接口（例如 by-name factory），便于通过配置动态装配。
- 记录并暴露可复现信息：config、git commit、运行命令与随机种子。

使用与扩展
- 新增功能应放入对应子模块并保持小范围、可测试的接口。
- 将 I/O、模型定义与训练循环解耦，便于单元测试与复用。
- 在模块中尽量采用明确的输入/输出约定（数据类型与形状说明）。
- 单个文件不超过 300 行，超过则拆分为多个模块。

测试与维护
- 为核心逻辑添加单元测试（可放在 tests/ 或 CI 中），覆盖边界情况与小样例。
- 在脚本执行时生成 manifest/metadata 以便追溯（配置、commit、环境、seed）。
- 保持依赖最小并记录环境（requirements / environment 文件）以便重现。

本文件为目录引导文档；具体实现与使用示例请参见各子模块的 README 或源码注释。